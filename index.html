<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>TikTok Live Chat</title>
  <style>
    body { font-family: sans-serif; background: #111; color: #eee; text-align: center; }
    #chat { max-width: 600px; margin: 30px auto; padding: 20px; background: #222; border-radius: 10px; }
    .msg { text-align: left; margin: 10px 0; padding: 8px; background: #333; border-radius: 5px; }
    input { padding: 10px; border-radius: 5px; border: none; width: 60%; }
    button { padding: 10px 15px; border: none; background: #0a84ff; color: white; border-radius: 5px; cursor: pointer; }
  </style>
</head>
<body>
  <h2>ðŸŸ£ TikTok Live Chat Viewer</h2>
  <div>
    <input id="uniqueId" placeholder="à¹ƒà¸ªà¹ˆà¸Šà¸·à¹ˆà¸­à¸šà¸±à¸à¸Šà¸µ TikTok (à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸¡à¸µ @)" />
    <button onclick="connect()">à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­</button>
  </div>
  <div id="status">à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­</div>
  <div id="chat"></div>

  <script src="https://cdn.jsdelivr.net/npm/tiktok-live-connector/dist/tiktok-live-connector.min.js"></script>
  <script>
    let connection;

    function connect() {
      const uniqueId = document.getElementById('uniqueId').value.trim();
      if (!uniqueId) return alert("à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­à¸šà¸±à¸à¸Šà¸µ TikTok");

      document.getElementById('status').textContent = "â³ à¸à¸³à¸¥à¸±à¸‡à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­...";

      connection = new TikTokIOConnection(uniqueId);

      connection.connect().then(state => {
        document.getElementById('status').textContent = "âœ… à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹à¸¥à¹‰à¸§à¸à¸±à¸š: " + state.roomId;
      }).catch(err => {
        document.getElementById('status').textContent = "âŒ à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: " + err;
      });

      connection.on('chat', data => {
        const div = document.createElement('div');
        div.className = 'msg';
        div.textContent = `${data.nickname}: ${data.comment}`;
        document.getElementById('chat').appendChild(div);
        document.getElementById('chat').scrollTop = document.getElementById('chat').scrollHeight;
      });
    }
  </script>
</body>
</html>
